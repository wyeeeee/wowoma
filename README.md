# Discord 身份验证机器人

一个简单易用的Discord身份验证系统，支持用户申请验证、管理员审核和自动角色分配。

## 功能特色

- 🎯 **卡片式界面** - 现代化的UI设计，简洁直观
- 📝 **表单化申请** - 用户通过表单提交验证申请
- ⚡ **斜杠命令** - 全部使用斜杠命令操作，支持自动补全
- 🔧 **完全自定义** - 审核频道、验证身份组、管理员权限均可自定义
- 💾 **JSON持久化** - 配置自动保存，重启后仍然有效
- 🔒 **权限管理** - 精细的权限控制系统

## 项目结构

```
├── main.py                 # 主程序入口
├── config.cfg             # 配置文件
├── config_manager.py      # 配置管理模块
├── data_manager.py        # JSON数据持久化管理
├── verification_views.py  # 验证面板视图组件
├── commands.py           # 斜杠命令处理器
├── requirements.txt      # 依赖包
├── server_data.json      # 服务器配置数据（自动生成）
└── README.md            # 项目说明
```

## 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 配置机器人

编辑 `config.cfg` 文件，填入你的机器人Token：

```ini
[bot]
token=你的机器人Token
description=Discord验证机器人
activity_type=playing
activity_name=验证管理
```

### 3. 运行机器人

```bash
python main.py
```

### 4. 一键配置服务器

使用 `/设置` 命令一键配置验证系统：

```
/设置 审核频道:#审核频道 验证身份组:@验证身份组 [管理员身份组:@管理员身份组]
```

### 5. 创建验证面板

配置完成后，使用 `/验证面板` 命令在任意频道创建验证面板。

## 斜杠命令

| 命令 | 描述 | 权限要求 |
|------|------|----------|
| `/设置` | 一键设置验证系统 | 服务器管理员 |
| `/验证面板` | 创建验证面板 | 管理员 |
| `/配置` | 查看当前配置 | 管理员 |

## 使用流程

1. **一键配置**：使用 `/设置` 命令配置审核频道、验证身份组和管理员身份组
2. **创建面板**：使用 `/验证面板` 在公共频道创建验证面板
3. **用户申请**：用户点击按钮填写申请表单
4. **管理员审核**：在审核频道查看申请并点击通过/拒绝
5. **自动处理**：通过后自动分配身份组并私信通知用户

## 机器人权限

确保机器人具有以下权限：

- 发送消息
- 管理身份组
- 查看频道
- 使用斜杠命令
- 发送私信

## 注意事项

- 机器人的身份组位置必须高于要分配的验证身份组
- 只有服务器管理员才能使用 `/设置` 命令进行初始配置
- 配置信息自动保存到 `server_data.json` 文件，重启后仍然有效
- 建议在测试环境中先试用功能

## 常见问题

**Q: 机器人无法分配身份组？**
A: 请确保机器人的身份组位置高于要分配的身份组。

**Q: 斜杠命令不显示？**
A: 机器人启动后会自动同步命令，可能需要等待几分钟。

**Q: 配置丢失了？**
A: 配置自动保存在 `server_data.json` 文件中，如果文件损坏或丢失，请重新使用 `/设置` 命令配置。

## 许可证

本项目采用 MIT 许可证。

## 支持

如果你在使用过程中遇到问题，请提交 Issue 或联系开发者。